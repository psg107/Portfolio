<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./style.css" rel="stylesheet">
    <title>포트폴리오</title>
</head>

<body>
    <header>
        <h1>포트폴리오</h1>
    </header>
    <div class="container">
        <div class="main">
            <div class="modal-overlay" id="modalOverlay">
                <div class="modal-content">
                    <img src="" alt="image" id="modalImage">
                </div>
            </div>

            <!-- 프로필 -->
            <div class="section section-profile">
                <h2>프로필</h2>
                <p>개발자 박상곤입니다.</p>
            </div>

            <!-- 연락처 -->
            <div class="section section-contact">
                <h2>연락처</h2>
                <p>Email: psg107@naver.com</p>
                <p>GitHub: <a href="https://github.com/psg107">https://github.com/psg107</a></p>
                <p>LinkedIn: <a
                        href="https://www.linkedin.com/in/상곤-박-843b8522b/">https://www.linkedin.com/in/상곤-박-843b8522b/</a>
                </p>
            </div>

            <!-- 프로젝트 -->
            <div class="section section-project">
                <h2>프로젝트</h2>
                <div class="projects"></div>
            </div>
        </div>
    </div>

    <script>
        fetch('projects.json')
            .then(response => response.json())
            .then(projects => {
                let projectSection = document.querySelector('.section > .projects');

                projects.forEach(project => {
                    var projectUrl = project.repositoryType !== "Private" ? project.repositoryUrl : null;
                    var url = projectUrl ?? project.link;

                    projectSection.innerHTML += `
                        <div class="project">
                            <div class="project-header">
                                <h3 class="name">${project.name}</h3>
                                <div class="date-btn-container">
                                    <p class="date">(${project.date})</p>
                                    ${project.image != null ? `<button class="show-image-btn" data-image-url="${project.image}">🖼️</button>` : ""}
                                </div>
                            </div>

                            <p class="skills">${project.skills.join(', ')}</p>
                            <p class="description">${project.description.replaceAll("\n", "<br/>")}</p>
                            
                            ${url != null ? `
                            <a class="link" target="_blank" href='${url}'>${url}</a>
                            ` : ""}
                        </div>
                    `;
                });

                // 모달
                const showImageButtons = document.querySelectorAll('.show-image-btn');
                const modalOverlay = document.getElementById('modalOverlay');
                const modalImage = document.getElementById('modalImage');

                showImageButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const imageUrl = button.getAttribute('data-image-url');
                        if (imageUrl) {
                            modalImage.src = './images/' + imageUrl;
                            modalOverlay.style.display = 'flex';
                        }
                    });
                });
                modalOverlay.addEventListener('click', () => {
                    modalOverlay.style.display = 'none';
                });
            })
            .catch(error => {
                console.error('프로젝트 데이터를 불러오는 데 실패했습니다:', error);
            });
    </script>
</body>

</html>