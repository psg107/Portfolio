# CLAUDE.md

## 놀유니버스 시스템 맥락 (포트폴리오 작성용)

> 박상곤 경력: 케이소프트(2018-2021) → 놀유니버스(2021.06~현재)
> 회사명 변경: 인터파크 → 인터파크트리플 → 놀유니버스 (같은 회사)

### 구패키지 시스템 (2021.06 ~ 2023)

**20년+ 운영된 C# 레거시 패키지 여행 시스템**

- 기초상품-출발상품 구조로 상품/예약 관리
- 사내 어드민에서 **모든 것이 가능** (수기예약, 금액조절, 일정조율 등)
- 개발자 2~3명이 운영

**문제점 (왜 신패키지를 만들었나):**
- 예약마다 담당자가 직접 핸들링 (전화, 금액계산, 일정조율)
- 싱글차지도 담당자가 직접 계산 → 고객에게 추가 청구
- **예약 증가 = 인건비 선형 증가** (자동화 불가)
- C# 개발자 부족, 레거시 유지보수 한계

### 신패키지 시스템 (2023 ~ 현재)

**Kotlin + Spring Boot + MSA로 재구축, B2C 자동화 목적**

- 아이템(교통/호텔/투어) + 아이템그룹 조합 구조
- 아이템별 원가, 재고, 일자별 판매상태 관리
- **자동 가격 계산** (1인/2인 예약 시 싱글차지 자동 반영)
- 아이템 재사용으로 다양한 상품 조합 가능
- 시작: 백엔드(팀장1+팀원4), PM 2명 → 현재: 개발팀(팀장1+백엔드6+프론트2), PM팀(팀장1+팀원3)

**한계:**
- B2C 자동화에 최적화 → **수기예약, 자유로운 금액조정 기능 없음**
- 구패키지 일몰 예정이지만 B2B(법인단체)는 신패키지로 불가

### 법인단체 시스템 (2025.10 ~ 현재)

**구패키지 일몰 대비, B2B 법인단체 업무용 시스템**

- 외부 법인과 계약 → 단체 수기 등록
- 자유로운 금액 조정, 담당자 핸들링 필요
- 구패키지의 유연성 + 신패키지 기술스택(Kotlin)
- 백엔드 2명, 2달차 개발 중

### 시스템 관계도

```
구패키지 (C#, 20년 레거시)
├── 모든 것 가능, 전부 수동
├── B2C + B2B 모두 처리
└── 2026년 일몰 예정

신패키지 (Kotlin MSA)
├── B2C 자동화 (가격계산, 재고관리)
├── 아이템 조합 구조
└── 수기 기능 없음 → B2B 불가

법인단체 (Kotlin, 신규)
├── B2B 전용 (단체 여행)
├── 수기등록 + 자유로운 금액조정
└── 구패키지 기능을 신패키지 스택으로
```

---

## 프로젝트 개요
박상곤의 포트폴리오 웹사이트 (정적 HTML/CSS/JS)
- **라이브**: https://psg107.github.io/Portfolio/
- **로컬 실행**: `python -m http.server 5500`
- **PDF 생성**: `node generate-pdf.js` (5500 포트 필요)

## 핵심 파일
- `portfolio.json` - 전체 포트폴리오 데이터 (profile, skills, experience, projects, contact)
- `main.js` - 렌더링 로직
- `styles.css` - 스타일시트
- `index.html` - HTML 구조

## portfolio.json 구조
```json
{
  "profile": { "name", "title", "subtitle", "description" },
  "skills": [["Kotlin", "Spring Boot", ...], ["Claude Code", ...]],
  "experience": [{ "period", "company", "role", "description", "details", "stack" }],
  "projects": [{
    "id": "프로젝트ID",
    "name": "프로젝트명",
    "status": "completed | in-progress",
    "category": "new-package | old-package | personal",
    "summary": "한 줄 설명",
    "description": "상세 설명 (패널용)",
    "implementations": ["기술적 구현 내용 (패널용)"],
    "period": { "from": "2024.10" },
    "stack": ["Kotlin", "Spring Boot"],
    "link": "https://...",
    "images": ["images/1.png"],
    "sourcePath": ["/로컬/소스/경로"]  // AI 소스 분석용, 렌더링 안 됨
  }],
  "contact": { "email", "github" }
}
```

---

## 콘텐츠 작성 규칙

### 세 필드의 역할 구분 (중요!)

| 필드 | 질문 | 특징 | 예시 |
|-----|------|-----|-----|
| **summary** | "이게 뭔 서비스야?" | 한 줄 | "법인 고객 대상 단체 여행을 관리하는 서비스입니다." |
| **description** | "왜 필요하고 어떻게 쓰는 거야?" | 2~3문장, 맥락+흐름 | "법인 고객이 단체 여행을 의뢰하면 담당자가 이 시스템으로 관리합니다. 행사 등록부터 여행자 명단 관리, 결제, 보험 가입까지 한 화면에서 처리합니다." |
| **implementations** | "이거 어떻게 만들었어?" | 기술적 해결 | "DB Lock으로 동시 보험 가입 중복 방지" |

### summary 작성
- "이 서비스가 뭔가요?"에 대한 한 줄 답변
- 시스템 관점, 기능 중심
- 회사 내부 사정 언급 금지 ("레거시 대체", "일몰 대응" 등)
- 인사팀도 이해할 수 있게

### description 작성 (중요!)
- **summary와 명확히 구분**: summary는 "뭔 서비스야?" 한 줄, description은 맥락과 흐름을 담은 2~3문장
- **독자**: 면접관, 채용 담당자 (비개발자 포함, 맥락을 모르는 사람)
- **길이**: 최소 2문장 이상. 짧으면 summary와 구분이 안 됨

**담아야 할 내용** (순서대로):
1. **맥락**: 왜 이 서비스가 필요한가? 어떤 상황/문제가 있는가?
2. **흐름**: 어떻게 동작하는가? 누가 무엇을 하는가?
3. **연결** (선택): 다른 서비스와의 관계, 이후 흐름

**좋은 예시**:
```
✅ "기존 시스템과 신규 시스템의 상품을 하나의 검색 결과로 통합합니다.
    고객은 시스템 구분 없이 모든 상품을 검색할 수 있습니다."

✅ "모두투어 같은 외부 여행사가 등록한 패키지 상품을 놀유니버스에서 함께 판매합니다.
    공급사가 새 상품을 등록하거나 가격을 변경하면 이 서비스가 주기적으로 정보를 수집해 최신 상태를 유지합니다."

✅ "법인 고객이 단체 여행을 의뢰하면 담당자가 이 시스템으로 관리합니다.
    행사 등록부터 여행자 명단 관리, 결제, 보험 가입까지 한 화면에서 처리합니다."
```

**나쁜 예시** (summary와 구분 안 됨):
```
❌ "공급사의 상품 정보를 주기적으로 수집하고, 변경 사항을 감지하여 저장합니다." (맥락 없음, 너무 짧음)
❌ "고객이 웹이나 홈쇼핑에서 예약하면 결제, 보험 가입까지 한 번에 처리합니다." (맥락 없음)
❌ "담당자가 별도로 동기화 작업을 하지 않아도 됩니다." (이점만, 동작 없음)
```

**피해야 할 표현**:
- "우리 시스템" → 독자는 "우리"가 누군지 모름
- "변환합니다", "처리합니다" (단독 사용) → 개발자 관점, 추상적
- "판매 가능한 형태로" → 개발 내부 용어
- 기술 용어 (배치 잡, SQS, Adapter Pattern 등) → implementations로

### implementations 작성
- "이거 어떻게 만들었어?"에 대한 답변
- 기술적 깊이가 있는 구현 사항
- 단순 CRUD가 아닌, 문제 해결 과정이 드러나는 포인트

**형식**: `[기술/방법]으로 [뭘 해결]`
```
✅ "DB Lock으로 동시 보험 가입 중복 방지"
✅ "Saga 패턴으로 예약/결제/보험 보상 트랜잭션 처리"
✅ "Adapter Pattern으로 구/신패키지 플랫폼 통합"
```

**피해야 할 것**:
- 너무 긴 복문 (절이 4개 이상)
- 구어체 ("~해서", "~하면")
- 과한 수식어 ("신뢰성 확보를 위한")
- 불필요한 숫자 ("5개", "3단계")

### 금지 표현 (AI스러움)
```
❌ "~를 구축했습니다"
❌ "~를 통해 ~를 향상시켰습니다"
❌ "~기반으로 ~를 구현했습니다"
❌ "~를 활용하여"
❌ "~할 수 있도록"
❌ "~를 담당했습니다"
❌ "~를 도입하여"
```

---

## 소스 확인 규칙 (중요!)

**sourcePath가 있는 프로젝트는 반드시 소스를 확인한 후 내용 작성**

### 확인 프로세스
1. 프로젝트 전체 구조 탐색 (서비스, 컨트롤러, 도메인)
2. 실제 구현된 기능 파악 (엔티티만 있는 것 vs 서비스 구현된 것)
3. 포트폴리오에 없지만 중요한 기능 발굴
4. 미구현/TODO 상태인 것은 기술하지 않음

### 잘못된 예시
```
❌ "다단계 승인 관리: 환불/변경/추가/삭제 별 승인 프로세스"
   → Approval 엔티티만 있고 ApprovalService 없음 = 미구현
```

### 올바른 접근
```
✅ 서비스/컨트롤러 존재 여부 확인
✅ 실제 API 엔드포인트 확인
✅ 외부 연동 클라이언트 확인
```

---

## 콘텐츠 선별 기준

소스 분석 후 포트폴리오에 넣을지 판단할 때, 아래 질문 중 하나 이상 "예"면 포함:

### 포함 (어려운 문제)

**1. 실패를 다루는가?**
- 외부 API 실패 + 재시도/폴백 처리
- 부분 성공/부분 실패 처리
- 예: "두 보험사 동시 호출, 한쪽 실패해도 정상 처리"

**2. 여러 것의 정합성을 맞추는가?**
- 다중 데이터 소스 간 트랜잭션
- 분산 락, 보상 트랜잭션
- 예: "40개 컬렉션 세션 트랜잭션 + Saga 패턴"

**3. 성능 문제를 해결하는가?**
- 캐싱 전략 (다층, TTL, 갱신 정책)
- 병렬/비동기 처리
- 예: "5계층 Redis 캐시"

**4. 변화에 유연하게 대응하는가?**
- 여러 타입을 하나의 로직으로 처리 (Strategy, Adapter)
- 외부 시스템 변경에 대한 추상화
- 예: "모듈형 아키텍처로 항공/호텔/투어 독립 관리"

### 제외 (쉬운 문제)
- 단순 CRUD
- 프레임워크 기본 기능
- 설정/구성만 있는 것
- 단일 API 호출 (실패 처리 없음)
